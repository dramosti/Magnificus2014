<runtime:WindowsBase 
        xmlns:System="clr-namespace:System;assembly=mscorlib"
        xmlns:runtime="clr-namespace:HLP.Comum.View.Formularios;assembly=HLP.Comum.View"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:convert="clr-namespace:HLP.Comum.View.Converters;assembly=HLP.Comum.View"
        xmlns:Components="clr-namespace:HLP.Comum.View.Components;assembly=HLP.Comum.View"
        x:Class="HLP.Entries.View.WPF.Gerais.WinCalendario"
        Title="WinCalendario" Height="660" Width="1024" NameView="vwCalendario">
    <Window.Resources>
        <convert:DateTimeToStringLongConverter x:Key="dateLongConverter"/>
        <convert:DateTimeToStringHourConverter x:Key="dateConverter"/>
    </Window.Resources>
    <DockPanel LastChildFill="True">
        <Expander DockPanel.Dock="Left" Header="Principal" IsExpanded="True" Width="485">
            <WrapPanel Orientation="Vertical" Margin="0,10,0,0">
                <Components:HlpTextBox 
					Text="{Binding currentModel.idCalendario, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
					IsReadOnly="True"
					Height="27" Margin="10,0,0,2" HorizontalAlignment="Left" Caption="Código" Help="Chave principal do registro calendário" WidthLabel="137" Width="224.333"/>
                <Components:HlpTextBox 
					Validation.ErrorTemplate="{StaticResource exceptionComp}"
					Text="{Binding currentModel.xNome, Mode=TwoWay, NotifyOnValidationError=True, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
					IsEnabled="{Binding bIsEnabled}"
					Height="27" Margin="10,0,0,2" HorizontalAlignment="Left" Caption="Nome" Help="Insira resumidamente o nome do calendário" WidthLabel="137" Width="400"/>
                <Components:HlpTextBox 
					Validation.ErrorTemplate="{StaticResource exceptionComp}"
					Text="{Binding currentModel.xDescricao, Mode=TwoWay, NotifyOnValidationError=True, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
					IsEnabled="{Binding bIsEnabled}"
					Height="27" Margin="10,0,0,2" HorizontalAlignment="Left" Caption="Descrição " Help="Descrição do calendário" WidthLabel="137" Width="400"/>
                <Components:HlpPesquisa 
					Validation.ErrorTemplate="{StaticResource exceptionComp}"
					Text="{Binding currentModel.idCalendarioBase, Mode=TwoWay, NotifyOnValidationError=True, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
					IsEnabled="{Binding bIsEnabled}"
					Height="27" Margin="10,0,0,2" HorizontalAlignment="Left" Caption="Calendário Base" Help="Informar o calendário base que esse novo calendário irá usar, essa opção desabilitará todos os recurso de geração de datas e horas e usará como base o calendário indicado, para fazer a alteração nesse calendário é preciso alterar o calendário base, tomar cuidado que ao alterar o calendário base será alterados todos os calendários que o utilizam." WidthLabel="137" Width="400" FieldPesquisa="ID" TableView="vwCalendario">
                    <Components:HlpPesquisa.Items>
                        <System:String>xNome</System:String>
                        <System:String>xDescricao</System:String>
                    </Components:HlpPesquisa.Items>
                </Components:HlpPesquisa>
                <Button Content="Gerar" Command="{Binding gerarByCalendarioBaseCommand}" IsEnabled="{Binding bIsEnabled}" Height="27" Width="75" HorizontalAlignment="Left" Margin="147,0,10,2"/>
            </WrapPanel>
        </Expander>
        <Expander Header="Detalhamento" IsExpanded="True">
            <DockPanel LastChildFill="True">
                <StackPanel DockPanel.Dock="Top" Height="49" Orientation="Horizontal">
                    <Button Content="Gerar Detalhamento" IsEnabled="{Binding bIsEnabled}" Command="{Binding gerarDetalhamentoCommand}" Width="175" Margin="10"/>
                </StackPanel>
                <DataGrid
                    ItemsSource="{Binding currentModel.lCalendario_DetalheModel}"
					IsEnabled="{Binding bIsEnabled}"
					AutoGenerateColumns="False" 
                    SelectionUnit="CellOrRowHeader" 
                    CanUserReorderColumns="False"  
                    CanUserDeleteRows="True" >
                    <DataGrid.Columns>
                        <DataGridTemplateColumn Header="Data" Width="*">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock  Text="{Binding dCalendario, UpdateSourceTrigger=PropertyChanged,
                                            NotifyOnValidationError=True, ValidatesOnDataErrors=True, Converter={StaticResource dateLongConverter}}"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                            <DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <DatePicker SelectedDate="{Binding dCalendario, UpdateSourceTrigger=PropertyChanged,
                                            NotifyOnValidationError=True, ValidatesOnDataErrors=True}" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellEditingTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTemplateColumn Header="Hora Inicial" Width="150">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding dHoraInicio, UpdateSourceTrigger=PropertyChanged,
                                            NotifyOnValidationError=True, ValidatesOnDataErrors=True, Converter={StaticResource dateConverter}}"></TextBlock>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                            <DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <Components:TimePicker Value="{Binding dHoraInicio, UpdateSourceTrigger=PropertyChanged,
                                            NotifyOnValidationError=True, ValidatesOnDataErrors=True}"></Components:TimePicker>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellEditingTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTemplateColumn Header="Hora Final" Width="150">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding dHoraTermino, UpdateSourceTrigger=PropertyChanged,
                                            NotifyOnValidationError=True, ValidatesOnDataErrors=True, Converter={StaticResource dateConverter}}"></TextBlock>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                            <DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <Components:TimePicker Value="{Binding dHoraTermino, UpdateSourceTrigger=PropertyChanged,
                                            NotifyOnValidationError=True, ValidatesOnDataErrors=True}"></Components:TimePicker>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellEditingTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </DockPanel>
        </Expander>

    </DockPanel>
</runtime:WindowsBase>
